# Test info

- Name: Task Management >> should allow adding multiple tasks
- Location: /Users/josemejias/WebstormProjects/task-manager-qa-app/playwright/tests/task.spec.js:35:3

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toContainText(expected)

Locator: locator('#task-list')
Expected string: "First Task"
Received string: "Second Taskx"
Call log:
  - expect.toContainText with timeout 5000ms
  - waiting for locator('#task-list')
    9 × locator resolved to <ul id="task-list" class="list-group mt-3">…</ul>
      - unexpected value "Second Taskx"

    at /Users/josemejias/WebstormProjects/task-manager-qa-app/playwright/tests/task.spec.js:40:46
```

# Page snapshot

```yaml
- heading "Task Manager" [level=1]
- textbox "New task..."
- button "Add Task"
- button "Remove All"
- list:
  - listitem:
    - text: Second Task
    - button "Delete task Second Task": x
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 |
   3 | test.describe('Task Management', () => {
   4 |   test.beforeEach(async ({ page }) => {
   5 |     await page.goto(process.env.BASE_URL || 'http://localhost:3000');
   6 |     // Clear all tasks before each test
   7 |     const deleteButtons = await page.locator('#task-list .btn-danger').all();
   8 |     for (const btn of deleteButtons) {
   9 |       await btn.click();
  10 |     }
  11 |   });
  12 |
  13 |   test('should add a task', async ({ page }) => {
  14 |     await page.fill('#task-input', 'Test Playwright Task');
  15 |     await page.click('text=Add Task');
  16 |     await expect(page.locator('#task-list')).toContainText('Test Playwright Task');
  17 |   });
  18 |
  19 |   test('should clear the input after adding a task', async ({ page }) => {
  20 |     const input = page.locator('#task-input');
  21 |     await input.fill('Another CI Test Task');
  22 |     await page.click('text=Add Task');
  23 |
  24 |     await expect(page.locator('#task-list')).toContainText('Another CI Test Task');
  25 |     await expect(input).toHaveValue('');
  26 |   });
  27 |
  28 |   test('should not add a task if input is empty', async ({ page }) => {
  29 |     await page.fill('#task-input', '');
  30 |     await page.click('text=Add Task');
  31 |     await expect(page.locator('#form-warning')).toBeVisible({ timeout: 2000 });
  32 |     await expect(page.locator('#form-warning')).toHaveText('Task title cannot be empty.');
  33 |   });
  34 |
  35 |   test('should allow adding multiple tasks', async ({ page }) => {
  36 |     await page.fill('#task-input', 'First Task');
  37 |     await page.click('text=Add Task');
  38 |     await page.fill('#task-input', 'Second Task');
  39 |     await page.click('text=Add Task');
> 40 |     await expect(page.locator('#task-list')).toContainText('First Task');
     |                                              ^ Error: Timed out 5000ms waiting for expect(locator).toContainText(expected)
  41 |     await expect(page.locator('#task-list')).toContainText('Second Task');
  42 |   });
  43 |
  44 |   test('should show warning if task input exceeds 20 characters', async ({ page }) => {
  45 |     const longText = 'A'.repeat(21); // more than 20 characters
  46 |     await page.fill('#task-input', longText);
  47 |
  48 |     // Ensure warning is not visible initially
  49 |     await expect(page.locator('#form-warning')).toBeHidden();
  50 |
  51 |     // Attempt to add the task
  52 |     await page.click('text=Add Task');
  53 |
  54 |     // Verify warning message appears after clicking Add Task
  55 |     const warning = page.locator('#form-warning');
  56 |     await expect(warning).toBeVisible({ timeout: 2000 });
  57 |     await expect(warning).toHaveText('Task title must be 20 characters or less.');
  58 |
  59 |     // Verify task was not added to the list
  60 |     const taskItems = await page.locator('#task-list li');
  61 |     const taskTexts = await taskItems.allTextContents();
  62 |     expect(taskTexts.some(text => text.includes(longText))).toBeFalsy();
  63 |   });
  64 |   test('should assign a UUID to new tasks', async ({ page }) => {
  65 |     await page.fill('#task-input', 'UUID Test');
  66 |     await page.click('text=Add Task');
  67 |
  68 |     const deleteButtons = await page.locator('#task-list .btn-danger');
  69 |     const dataId = await deleteButtons.first().getAttribute('data-id');
  70 |     expect(dataId).toMatch(/^[\da-f]{8}-([\da-f]{4}-){3}[\da-f]{12}$/i);
  71 |   });
  72 |
  73 |   test('should delete a task', async ({ page }) => {
  74 |     await page.fill('#task-input', 'Task to be deleted');
  75 |     await page.click('text=Add Task');
  76 |
  77 |     const taskLocator = page.locator('#task-list li', { hasText: 'Task to be deleted' });
  78 |     await expect(taskLocator).toBeVisible();
  79 |
  80 |     const deleteButton = taskLocator.locator('.btn-danger');
  81 |     await deleteButton.click();
  82 |
  83 |     await expect(taskLocator).not.toBeVisible();
  84 |   });
  85 | });
  86 |
```